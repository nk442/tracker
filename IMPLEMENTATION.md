# Click Tracker - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Backend (FastAPI)

#### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
tracker/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å lifespan
‚îÇ   ‚îú‚îÄ‚îÄ config.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ Pydantic Settings
‚îÇ   ‚îú‚îÄ‚îÄ database.py          # –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—É–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (asyncpg)
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py       # Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.py           # API endpoints –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pages.py         # HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å HTMX
‚îÇ   ‚îî‚îÄ‚îÄ templates/           # Jinja2 —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ static/                  # CSS —Å—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ init.sql                 # SQL —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ requirements.txt         # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

#### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)

**–¢–∞–±–ª–∏—Ü–∞ campaigns:**
- –•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–º–ø–∞–Ω–∏—è—Ö (–Ω–∞–∑–≤–∞–Ω–∏–µ, offer URL)
- Auto-increment ID –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–¢–∞–±–ª–∏—Ü–∞ events:**
- –•—Ä–∞–Ω–∏—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è (email_click, landing_click, conversion)
- –°–≤—è–∑—å —Å campaigns —á–µ—Ä–µ–∑ foreign key
- JSONB –ø–æ–ª–µ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø–æ campaign_id, email, domain

#### 3. API Endpoints

**GET /api/event** - –ü—Ä–∏–µ–º —Å–æ–±—ã—Ç–∏–π
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: cid, event, email, domain
- –õ—é–±—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ JSONB
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è (email_click, landing_click, conversion)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ IP –∏ User-Agent
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{"status": "ok", "event_id": 123}`

#### 4. Web –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Jinja2 + HTMX)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1: –ì–ª–∞–≤–Ω–∞—è (/)** 
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞–º–ø–∞–Ω–∏–π —Å –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–π –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞–º–ø–∞–Ω–∏–∏
- –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ (HTMX)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏–∏ (/create)**
- –§–æ—Ä–º–∞ —Å –ø–æ–ª—è–º–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ, offer URL
- HTMX –æ—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞–º–ø–∞–Ω–∏–∏

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ 3: –î–µ—Ç–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏–∏ (/campaign/{id})**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - Email –∫–ª–∏–∫–∏
  - Landing –∫–ª–∏–∫–∏
  - –ö–æ–Ω–≤–µ—Ä—Å–∏–∏
  - Conversion rate (%)
  - –ê–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
  
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º:
  - –†–∞–∑–±–∏–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –ø–æ –∫–∞–∂–¥–æ–º—É –¥–æ–º–µ–Ω—É
  - Conversion rate –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–µ–Ω–∞
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∫–ª–∏–∫–æ–≤
  
- –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
  - –¢–∞–±–ª–∏—Ü–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö email —Å –∏—Ö —Å–æ–±—ã—Ç–∏—è–º–∏
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–æ–º–µ–Ω—É (dropdown)
  - –ü–æ–∏—Å–∫ –ø–æ email (live search —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 500ms)
  - –ü–∞–≥–∏–Ω–∞—Ü–∏—è "–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ" (50 –∑–∞–ø–∏—Å–µ–π –∑–∞ —Ä–∞–∑)
  - –ü–æ–∫–∞–∑–∞–Ω—ã —á–µ–∫–º–∞—Ä–∫–∏ (‚úì/‚úó) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è

### Frontend (HTMX)

#### –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ JavaScript:
- `hx-get` - –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ä–≤–µ—Ä–∞
- `hx-post` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º
- `hx-trigger="every 30s"` - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
- `hx-trigger="keyup changed delay:500ms"` - live search
- `hx-swap` - –∑–∞–º–µ–Ω–∞/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- `hx-target` - —Ü–µ–ª–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- `hx-include` - –≤–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

#### Responsive –¥–∏–∑–∞–π–Ω:
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Grid layout –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- Hover —ç—Ñ—Ñ–µ–∫—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î (asyncpg)
- Connection pooling (2-10 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π)
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –ø–æ–ª—è
- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (COUNT, GROUP BY)
- JSONB –¥–ª—è –≥–∏–±–∫–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic
- HTTPException –¥–ª—è API –æ—à–∏–±–æ–∫ (400, 404)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ–±—ã—Ç–∏—è
- Early returns –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
- Graceful shutdown –ë–î —á–µ—Ä–µ–∑ lifespan context manager

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection)
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫
- CORS –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üì¶ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

**example_event_sender.py** - –ü—Ä–∏–º–µ—Ä —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ —Ç—Ä–µ–∫–µ—Ä

**add_test_data.py** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (3 –∫–∞–º–ø–∞–Ω–∏–∏, ~100 —Å–æ–±—ã—Ç–∏–π)

**QUICKSTART.md** - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

**Dockerfile & docker-compose.yml** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üöÄ –ó–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# 2. –°–æ–∑–¥–∞–Ω–∏–µ –ë–î
createdb tracker_db
psql -d tracker_db -f init.sql

# 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env
echo "DATABASE_URL=postgresql://postgres:password@localhost:5432/tracker_db" > .env

# 4. –ó–∞–ø—É—Å–∫
uvicorn app.main:app --reload
```

### Docker:
```bash
docker-compose up -d
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞: **http://localhost:8000**

## üéØ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

‚úÖ Tech Stack: FastAPI, PostgreSQL, Jinja2, HTMX  
‚úÖ API endpoint `/api/event` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤  
‚úÖ –°—Ö–µ–º–∞ –ë–î: campaigns + events —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏  
‚úÖ –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –∫–∞–º–ø–∞–Ω–∏–π  
‚úÖ –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–∏  
‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å —Ç—Ä–µ–º—è —Å–µ–∫—Ü–∏—è–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏  
‚úÖ HTMX –∞–≤—Ç–æ-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (10-30 —Å–µ–∫—É–Ω–¥)  
‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è "Load more"  
‚úÖ Responsive –¥–∏–∑–∞–π–Ω  

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (out of scope MVP)

- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- Export –¥–∞–Ω–Ω—ã—Ö (CSV, Excel)
- –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (Chart.js)
- Webhooks –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Rate limiting –¥–ª—è API
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (Redis)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª—ã/—Å–µ—Ä–≤–∏—Å
- Unit/Integration —Ç–µ—Å—Ç—ã
- CI/CD pipeline
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus/Grafana)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

–ö–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:
- ‚úÖ SOLID (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏)
- ‚úÖ DRY (–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞)
- ‚úÖ KISS (–ø—Ä–æ—Å—Ç–æ—Ç–∞ —Ä–µ—à–µ–Ω–∏–π)
- ‚úÖ Async/await –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ Type hints –¥–ª—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Pydantic
- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–º–∏–Ω–∏–º—É–º –∫–ª–∞—Å—Å–æ–≤)
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ–±—ä—è—Å–Ω—è—é—Ç "–ø–æ—á–µ–º—É", –Ω–µ "—á—Ç–æ"
