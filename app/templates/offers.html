{% extends "base.html" %}

{% block title %}Офферы - Tracker{% endblock %}

{% block header_actions %}
<a href="/offer/create" class="btn">+ Новый оффер</a>
<a href="/" class="btn btn-secondary">Кампании</a>
{% endblock %}

{% block content %}
<h2 class="section-title">Офферы</h2>

<table>
    <thead>
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>URL</th>
            <th>Кампаний</th>
            <th>Событий</th>
            <th>Создан</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for offer in offers %}
        <tr>
            <td><a href="/offer/{{ offer.id }}">{{ offer.id }}</a></td>
            <td><a href="/offer/{{ offer.id }}">{{ offer.name }}</a></td>
            <td>
                <a href="{{ offer.url }}" target="_blank" rel="noopener noreferrer">
                    {{ offer.url[:50] }}{% if offer.url|length > 50 %}...{% endif %}
                </a>
            </td>
            <td>{{ offer.campaigns_count or 0 }}</td>
            <td>{{ offer.total_events or 0 }}</td>
            <td>{{ offer.created_at.strftime('%d %b %Y') }}</td>
            <td>
                <a href="/offer/{{ offer.id }}" class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;">Статистика</a>
                <a href="/offer/{{ offer.id }}/edit" class="btn" style="padding: 5px 10px; font-size: 12px;">Редактировать</a>
            </td>
        </tr>
        {% else %}
        <tr>
            <td colspan="7" style="text-align: center; color: #95a5a6;">
                Нет офферов. <a href="/offer/create">Создайте первый оффер</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
